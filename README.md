## 项目名称: 网页单词高亮 Chrome 扩展程序

项目目标: 开发一个 Chrome 扩展程序，允许用户管理多个单词列表，并在浏览网页时根据列表高亮显示匹配的单词，同时支持为每个单词列表单独自定义高亮样式和匹配规则。

## 功能需求:

#### 单词列表管理:

本地存储: 使用浏览器的本地存储 (Local Storage) 来存储单词列表。

列表管理页面: 提供一个单独的选项页面，用于管理单词列表，包括：

添加新的单词列表

编辑现有单词列表的名称、内容、高亮样式和匹配规则

删除单词列表

在列表中添加、编辑、删除单词

页面单词添加: 在浏览网页时，可以选中页面中的单词，然后通过右键菜单或工具栏按钮选择添加到特定的单词列表中。

#### 单词高亮:

自动高亮: 当新的网页加载时，扩展程序会自动搜索并高亮页面中匹配的单词。

多列表支持: 支持同时启用多个单词列表。

高亮样式配置（每个列表独立）: 可以为每个单词列表配置独立的高亮样式，包括：

字体颜色

背景颜色

下划线

波浪线

删除线

加粗

#### 匹配规则（每个列表独立）: 可以为每个单词列表配置独立的匹配规则，包括：

可选择是否忽略大小写。

可选择是否进行词形还原 (lemmatization)，使用常见的 JavaScript 词形还原库，如 natural 或 compromise。

## 用户界面:

#### 工具栏: 在扩展程序的工具栏 (popup) 中，可以：

显示当前已启用的单词列表

启用或禁用特定的单词列表

快捷进入选项页面进行列表管理

#### 选项页面: 用于管理单词列表，提供添加、编辑、删除列表和单词的功能，以及设置每个列表的独立高亮样式和匹配规则。

右键菜单/工具栏按钮: 在页面中选中单词后，可以通过右键菜单或工具栏按钮快速添加到指定的单词列表。

## 技术要求:

内容脚本 (content script): 负责在网页加载时搜索并高亮单词，以及监听页面单词选中事件，并根据每个列表的配置应用不同的样式和匹配规则。

后台脚本 (background script): 负责监听扩展程序的安装、更新等事件，以及管理消息传递。

弹出窗口 (popup): 用于显示工具栏，让用户启用/禁用单词列表。

选项页面 (options page): 用于管理单词列表，并提供每个列表的独立配置选项。

本地存储 (local storage): 使用 chrome.storage.local API 来存储单词列表和配置。

消息传递: 使用 chrome.runtime.sendMessage 和 chrome.runtime.onMessage 来实现内容脚本、弹出窗口和选项页面之间的通信。

词形还原库: 使用 natural 或 compromise 等常见的 JavaScript 词形还原库。

## 非功能需求:

性能: 扩展程序应具有良好的性能，不应显著影响网页加载速度。

稳定性: 扩展程序应稳定运行，不应出现崩溃或错误。

易用性: 扩展程序应易于使用，用户界面应简洁明了。

可维护性: 代码应结构清晰、模块化，易于维护和扩展。

## 开发流程:

需求分析: 明确所有功能需求和非功能需求。

架构设计: 设计扩展程序的整体架构，包括各个组件之间的交互关系。

模块开发: 分模块开发扩展程序的各个功能，例如，单词列表管理、高亮、用户界面等。

集成测试: 将各个模块进行集成测试，确保各个功能正常运行。

用户测试: 让用户试用扩展程序，收集反馈并进行修改。

发布: 将扩展程序发布到 Chrome 网上应用店。

## 技术栈:

JavaScript

HTML

CSS

Chrome Extension APIs

natural 或 compromise 等词形还原库

## TODO

popup界面美化 添加更多开关选项
管理页面美化 优化词表管理布局
使用词形还原匹配 匹配成功后提示原型和是哪个变形匹配到的
鼠标移动到高亮词上面时显示中文翻译字段、英英翻译字段、笔记字段，可自由开关哪个字段以及显示功能
动词匹配
名词匹配
形容词匹配

用户体验优化
    UI美化：对选项页面、popup 界面进行视觉优化，增加图标、颜色和布局提升，改善用户视觉体验和操作流畅度
导入导出
    使用ini格式导入导出，方便用户使用编辑器编辑
同步
    支持google账号同步
性能优化
    性能优化：对于长文本页面，可优化文本节点处理方式、采用分片或延迟高亮策略，减少对页面性能的影响
    代码结构重构：根据需要将代码模块化（将数据处理、高亮逻辑、UI交互分别独立为模块），提高可维护性和扩展性
国际化
    i18n和本地化
发布

## 更新记录

v0.1 初始化项目
    能够正确高亮各个列表单词，popup界面和管理界面不够美观
v0.2 细节优化
v0.3 右键菜单实时更新
v0.4 UI美化
v0.5 添加词表导入导出
